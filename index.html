<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PDF Tools Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- jsPDF CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    .container {
      max-width: 700px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }
    button {
      margin-top: 20px;
      padding: 12px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>5-Page PDF Generator</h2>

  <label>PDF File Name (without .pdf)</label>
  <input id="pdfName" placeholder="ebook-download" />

  <label>Book Title</label>
  <input id="title" placeholder="Book Title" />

  <label>Author</label>
  <input id="author" placeholder="Author Name" />

  <label>Download Link</label>
  <input id="link" placeholder="https://example.com/download" />

  <label>Amazon ASIN (for cover image)</label>
  <input id="asin" placeholder="B08XXXXXXX" />

  <button onclick="generatePDF()">Generate PDF</button>
</div>

<script>
async function generatePDF() {
  const { jsPDF } = window.jspdf;

  const pdfName = document.getElementById('pdfName').value || 'ebook';
  const TITLE = document.getElementById('title').value;
  const AUTHOR = document.getElementById('author').value;
  const LINK = document.getElementById('link').value;
  const ASIN = document.getElementById('asin').value;

  const doc = new jsPDF({ unit: 'pt', format: 'a4' });
  const pageWidth = doc.internal.pageSize.getWidth();
  const pageHeight = doc.internal.pageSize.getHeight();

  /* -------- PAGE 1: FULL IMAGE -------- */
  const imageUrl = `https://images-na.ssl-images-amazon.com/images/P/${ASIN}.01.LZZZZZZZ.jpg`;

  const img = new Image();
  img.crossOrigin = 'anonymous';
  img.src = imageUrl;

  await new Promise((resolve) => {
    img.onload = resolve;
    img.onerror = resolve;
  });

  try {
    doc.addImage(img, 'JPEG', 0, 0, pageWidth, pageHeight);
  } catch (e) {
    doc.setFontSize(18);
    doc.text('Image could not be loaded', 40, 80);
  }

  /* -------- PAGE 2: TEXT + DOWNLOAD LINK -------- */
  doc.addPage();
  doc.setFontSize(14);

  const text = `Download or Read Online (${TITLE}) free ebook (PDF ePub Mobi) - (${AUTHOR})\n\n` +
    `Ebook PDF (${TITLE}) | EBOOK ONLINE DOWNLOAD\n` +
    `If you want to download a free ebook, you're in the right place. ` +
    `Ebook/PDF (${TITLE}) DOWNLOAD in English is available for free here. ` +
    `Click on the download LINK below to download the Ebook (${TITLE}) PDF Download ` +
    `in English by (${AUTHOR}) (Author).`;

  doc.text(text, 40, 60, { maxWidth: pageWidth - 80 });

  // Download button style
  const buttonText = 'DOWNLOAD PDF';
  doc.setFontSize(16);

  // Auto-calculate button width based on text length
  const textWidth = doc.getTextWidth(buttonText);
  const paddingX = 40;
  const buttonWidth = textWidth + paddingX * 2;
  const buttonHeight = 40;

  const buttonX = (pageWidth - buttonWidth) / 2;
  const buttonY = 260;

  doc.setFillColor(0, 102, 204);
  doc.rect(buttonX, buttonY, buttonWidth, buttonHeight, 'F');

  doc.setTextColor(255, 255, 255);
  doc.text(buttonText, pageWidth / 2, buttonY + 26, { align: 'center' });

  doc.link(buttonX, buttonY, buttonWidth, buttonHeight, { url: LINK });

  doc.setTextColor(0, 0, 0);

  /* -------- PAGE 3â€“5: BLANK PAGES -------- */
  doc.addPage();
  doc.addPage();
  doc.addPage();

  doc.save(`${pdfName}.pdf`);
}
</script>

</body>
</html>
